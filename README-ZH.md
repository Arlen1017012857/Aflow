# 项目名
Aflow

# 描述
Aflow是一个基于Python的工具管理和工作流自动化系统，集成了Neo4j进行数据管理和混合检索。它允许用户高效地创建、更新和管理工具、任务和工作流。可用于与Agent系统集成，让智能体可以搜索可用的工具、任务和工作流，并执行它们，也可以让智能体自动创建和优化工作流，提高生产力和智能自动化程度。

## 功能
- 管理工具及其属性。
- 创建和执行与特定工具相关的任务。
- 定义和运行由多个任务组成的复杂工作流。
- 工具、任务和工作流的混合搜索功能。
- **函数级代码变动检测**：无论是人类编写的工具还是AI生成的工具都会被检测并同步到数据库为Agent系统服务。
- **动态工具导入和参数捕获**：在执行任务时，动态导入工具并自动捕获所需参数进行执行。


# 技术架构和实现方法

Aflow项目采用模块化架构，利用各种组件有效地管理工具、任务和工作流。主要组件包括：

1. **AflowManager**：中央管理类，协调不同组件之间的交互，包括工具管理、任务执行和工作流编排。它初始化必要的数据库连接和检索管理器。

2. **数据库集成**：使用Neo4j作为底层数据库，实现工具、任务和工作流的高效存储和检索。通过`Neo4jManager`进行集成，处理所有数据库操作。

3. **动态工具管理**：工具被动态导入和管理，允许根据用户需求灵活执行任务。这包括自动检测代码变动并与数据库同步。

4. **工作流自动化**：支持创建和执行由多个相互关联的任务组成的复杂工作流，提高生产力和自动化程度。

5. **混合搜索功能**：实现高级搜索功能，允许用户使用混合检索方法检索工具、任务和工作流，改善整体用户体验。

6. **MerkleTree**：用于跟踪文件变更的Merkle树，实现函数级别的代码变动检测，确保工具目录的数据与数据库保持一致。该类可以可视化树结构及当前状态与之前状态之间的差异。


# 安装
1. 克隆代码库：
   ```bash
   git clone <repository-url>
   cd Aflow
   ```
2. 安装所需依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 根据提供的`.env.example`文件设置环境变量。

# 使用
要运行应用程序，请执行：
```bash
python main.py
```

# 依赖关系
- `python-dotenv`
- `neo4j`
- `neo4j-graphrag`
- `openai`
- `requests`
- `watchdog`


# TODO

- [x] 随着AI编程能力的提高，可以将工作流和任务也以代码的形式进行管理
- [x] 编写一些核心工具、核心任务和核心工作流
